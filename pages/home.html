<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>DSYS - Home</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="icon" href="../assets/logo.png">
</head>

<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <img src="/SysCadastro/assets/logo.png" alt="Logo DSYS" class="sidebar-logo">
            <div>
                <div class="sidebar-company">DSYS</div>
                <div class="sidebar-user">Usuário</div>
            </div>
        </div>
        <nav class="sidebar-menu">
            <a href="#" class="sidebar-tab active" data-tab="pecas">Peças</a>
            <a href="#" class="sidebar-tab" data-tab="carros">Carros</a>
            <a href="#" class="sidebar-tab" data-tab="orcamentos">Orçamentos</a>
        </nav>
        <div class="sidebar-footer">
            &copy; 2024 DSYS
        </div>
    </div>
    <div class="app-container">

        <main>
            <div id="welcome-header"></div>
            <section id="tab-pecas" class="tab-content active"></section>
            <section id="tab-carros" class="tab-content"></section>
            <section id="tab-orcamentos" class="tab-content"></section>
        </main>
    </div>

    <div id="modal-crud"></div>
    <div id="modal-home" class="modal">
        <div class="modal-content home-modal">
            <button class="close-modal" aria-label="Fechar"
                onclick="document.getElementById('modal-home').classList.remove('show')">&times;</button>
            <h2>Bem-vindo!</h2>
            <div class="modal-body">
                Este é um exemplo de modal estilizado para a página Home.
            </div>
            <div class="modal-actions">
                <button class="btn primary"
                    onclick="document.getElementById('modal-home').classList.remove('show')">OK</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        &copy; 2024 DSYS. Todos os direitos reservados.
    </footer>
    <script>
        async function loadComponent(id, path) {
            const res = await fetch(path);
            const html = await res.text();
            document.getElementById(id).innerHTML = html;
        }
        loadComponent('welcome-header', '../components/WelcomeHeader.html');
        loadComponent('tab-pecas', '../components/TablePecas.html');
        loadComponent('tab-carros', '../components/TableCarros.html');
        loadComponent('tab-orcamentos', '../components/TableOrcamentos.html');
        loadComponent('modal-crud', '../components/ModalCRUD.html').then(async () => {
            const modalModule = await import('../scripts/modal.js');
            if (modalModule.initModal) modalModule.initModal();
        });

        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.sidebar-tab');
            const sections = {
                pecas: document.getElementById('tab-pecas'),
                carros: document.getElementById('tab-carros'),
                orcamentos: document.getElementById('tab-orcamentos')
            };
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    Object.values(sections).forEach(sec => sec.classList.remove('active'));
                    const tabName = tab.getAttribute('data-tab');
                    if (sections[tabName]) sections[tabName].classList.add('active');
                });
            });
        });
    </script>
</body>

</html>